@(clist:List[vo.appPad.appPadChannelVO.Channel])(prolist:List[Product])(uid:Long)(cid:String)(count:Integer)(sign:WxSign)(usr:User)@views.html.H5.bbt.main{<title>嗨个购商城</title><script src="@assets.CdnAssets.urlForAPIPublic("javascripts/sheSaidJs/count.js")"></script><style>ul.content { width:100%;}  .pic-banner img{     width:100%;     }    img.goods-car{   position: fixed;   bottom: 20px;   left:20px;    width: 35px;   height: 35px;   display: block;   z-index: 99;   text-align: center;    }   </style><script type="text/javascript">  var counturl = location.href.split('#')[0];jQuery(function($){	var url = 'http://chaxun.1616.net/s.php?type=ip&output=json&callback=?&_='+Math.random(); 	$.getJSON(url, function(data){		//添加统计		addcountwx(data.Ip,counturl,'BBTDAOHANG','@usr.getUnionid()');	});});          function loadjscss(name,type){     if(type == "js"){      var fileref = document.createElement('script');      fileref.setAttribute("type","text/javascript");      fileref.setAttribute("src",name);     }else if(type == "css"){           var fileref = document.createElement('link');      fileref.setAttribute("rel","stylesheet");      fileref.setAttribute("type","text/css");      fileref.setAttribute("href",name);     }     if(typeof fileref != "undefined"){      document.getElementsByTagName("head")[0].appendChild(fileref);     }         }    /*     *X7--1280x720     *iphone6--1334x750     *小米Note--2560x1440     *iphone4_4s_5_5s--1136x640     *小米4_4c--1920x1080     */    var winW = $(window).width()*2;    if (winW >= 640 && winW < 720) {     loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/iphone4_4s_5_5s.css?1")","css");    } else if(winW >= 720 && winW < 750) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/x7.css")","css");    } else if(winW >= 750 && winW < 1080) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/iphone6.css")","css");    } else if(winW >= 1080 && winW < 1140) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/mi4_4c.css")","css");    } else if(winW >= 1140) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/miNote.css")","css");    }        </script>}{<div class="container"><!-- banner 使用 --><!-- <div class="hungrg"><img src="@assets.CdnAssets.urlForAPIPublic("images/H5/bbt/mhtbanner.jpg")" /></div>--?>            <div class="swiper-container" style="display:none">              <div class="swiper-wrapper">                    <div class="swiper-slide">Slide 1</div>                    <div class="swiper-slide">Slide 2</div>                    <div class="swiper-slide">Slide 3</div>                    <div class="swiper-slide">Slide 4</div>                </div>                <!-- Add Pagination -->                <div class="swiper-pagination"></div>            </div>                                   <div class="list" id="divContainer">             @if(prolist!=null){                             <ul class="content">                                       @for(p <- prolist){                 @if(p.getTypFlag()=="1"){                	 <li onclick="gosaid('@p.getPid()','@p.getEndorsementId()')" style="margin: 0px;">                 		<div class="hungrg"><img src="@p.getImgurl()" /></div>                 	  </li>	                 	}else{                    <li onclick="gosaid('@p.getPid()','@p.getEndorsementId()')">	                    <div class="pic-img">                    	                        <img src="@p.getListpic()"/>	                    </div>	                        <div class="name">	                            <div class="name-info">	                                <h2>@p.getTitle()</h2>	                                <!-- <p>@p.getSubtitle()</p> -->	                            </div>	                            <div class="price">	                                <span>￥<b>@if(p.getEndorsementPrice().toDouble>p.getEndorsementPrice().toInt){@p.getEndorsementPrice()}else{@p.getEndorsementPrice().toInt}</b><s>￥@if(p.getChinaprice().toDouble>p.getChinaprice().toInt){@p.getChinaprice()}else{@p.getChinaprice().toInt}</s></span>	                                <em><a href="javsscript:;">@p.getZhekou()折</a></em>	                            </div>	                        </div>	                                       <!--  <div class="china">                           <img src="@p.getNationalFlag()">                           <p>@p.getWayremark()</p>                        </div> -->                    </li>                   	}}                                              </ul>                }            </div>		<div class="loading" id="Loadding" name="Loadding"><img src="@assets.CdnAssets.urlForAPIPublic("images/H5/bbt/loading.gif")" style="width:100%; height:auto;"></div>        </div>        <div class="pic-banner">               <img src="@assets.CdnAssets.urlForAPIPublic("images/sheSaidImages/00001.jpg")" />            </div>            <img src="@assets.CdnAssets.urlForAPIPublic("images/H5/3ico-1.png")" class="goods-car"  onclick="gocart()"/>        <div>}{  <script type="text/javascript"> var ua = window.navigator.userAgent.toLowerCase(); var bw=false; if(ua.match(/MicroMessenger/i) == 'micromessenger'){		bw=true;}	function gocart(){		if(bw==true){			@if(usr.getOpenId()!=""){				window.location.href="/sheSaid/ordercart";			}else{					window.location.href="/sheSaid/wxauthcart?flg=orderlist&w=1";			}		}else{			_alert("请使用微信购买");		}	}	 $("#Loadding").hide();	if(!NeuF)		var NeuF ={};     NeuF.ScrollPage=function(obj, options, callback) {		var _defaultOptions = { delay: 500, marginBottom: 100 };//默认配置：延迟时间delay和滚动条距离底部距离		marginBottomoptions =$.extend(_defaultOptions, options);		this.isScrolling =false;//是否在滚动		this.oriPos = 0;//原始位置		this.curPos = 0;//当前位置		var me =this;//顶层		$obj = (typeof obj == "string") ? $("#" +obj) : $(obj);//绑定滚动事件		$obj.scroll(function(ev) {                me.curPos=$obj.scrollTop();				if($(window).height() + $(window).scrollTop() >= $(document.body).height() -options.marginBottom) {					if(me.isScrolling ==true)return;                    me.isScrolling=true;                    setTimeout(function() { me.isScrolling =false; }, options.delay);//重复触发间隔毫秒					if(typeof callback == "function") callback.call(null, me.curPos -me.oriPos);                };                me.oriPos=me.curPos;            });        };	 $(function() {            window.scrollTo(0, 0);//每次F5刷新把滚动条置顶//marginBottom表示滚动条离底部的距离，0表示滚动到最底部才加载，可以根据需要修改			new NeuF.ScrollPage(window, { delay: 1000, marginBottom: 0 },function(offset) {if(offset > 0) {                    $("#Loadding").show();//加载提示                    //alert($(".content").size());                    var ppcount=$(".content").size();                    var pagecount='@count';                   // alert(ppcount+",,,,,"+pagecount);                    if(ppcount<pagecount){						setTimeout(function() {//这里就是异步获取内容的地方，这里简化成一句话，可以根据需要修改													$.ajax({		   			            type:"GET",		   			            url:"/H5/prolistJson?uid=@uid&cid=@cid&page="+$(".content").size(),		   			            //返回数据的格式		   			            datatype: "json",//"xml", "html", "script", "json", "jsonp", "text".		   			            //在请求之前调用的函数		   			            beforeSend:function(){},		   			            //成功返回之后调用的函数            		   			            success:function(data){		   			            	//alert(data.htmlstr);		   			          		if(data.status==1){       						   			          						   			          		$("#divContainer").append($(data.htmlstr));//内容获取后，隐藏加载提示			   									   			          		}		   			          		$("#Loadding").hide();		   			            }   ,		   			            //调用执行后调用的函数		   			            complete: function(XMLHttpRequest, textStatus){		   			            },		   			            //调用出错执行的函数		   			            error: function(){		   			                //请求出错处理		   			                $("#Loadding").hide();		   			                _alert("提示请检查一下网络!");		   			            }        		   			         });							                    },1000);                    }else{                    	$("#Loadding").hide();                    }                }            });        });</script><script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script><script>var swiper = new Swiper('.swiper-container', {	loop : true,    pagination: '.swiper-pagination',    paginationClickable: true});//添加统计var ua = window.navigator.userAgent.toLowerCase();var iswx="0";if(ua.match(/MicroMessenger/i) == 'micromessenger'){	iswx="1";	WeixinJSBridge.call('showOptionMenu');}  function gosaid(pid,dyid){	window.location.href="/sheSaid/show?pid="+pid+"&daiyanid="+dyid;}  </script>@if(sign!=null){<script>var surl="@sign.getShareurl()";wx.config({    debug: false,    appId: '@sign.getAppId()',    timestamp: '@sign.getTimstr()',    nonceStr: '@sign.getNostr()',    signature: '@sign.getSign()',    jsApiList: ['checkJsApi',                'onMenuShareTimeline',                'onMenuShareAppMessage'    ]  });	wx.ready(function () {    // 1 判断当前版本是否支持指定 JS 接口，支持批量判断		wx.checkJsApi({		  jsApiList: [			'getNetworkType',			'previewImage'		  ],		  success: function (res) {			//alert(JSON.stringify(res));		  }		});		wx.onMenuShareTimeline({			title: '@sign.getSharetitle()', // 分享标题		    link: surl, // 分享链接		    imgUrl: '@sign.getShareimg()', // 分享图标		    success: function () { 		        // 用户确认分享后执行的回调函数		    },		    cancel: function () { 		        // 用户取消分享后执行的回调函数		    }		});		wx.onMenuShareAppMessage({			title: '@sign.getSharetitle()',			  desc: '@sign.getSharecontent()',			  link: surl,			  imgUrl: '@sign.getShareimg()',			  success: function (res) {				//alert('已分享');			  },			  cancel: function (res) {				//alert('已取消');			  }		  });		  });  wx.error(function (res){		//alert(res.errMsg);  });</script>}}