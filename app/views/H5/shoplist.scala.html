@(prolist:List[Product])(count:Integer)(sign:WxSign)(usr:User)(login:String)@views.html.H5.bbt.main{<title>嗨个购商城</title><style>.certificates{				padding:6px 10px 10px;				}		 	.certificates b{				color:#ff314e;								font-size:12px;				font-weight:400;							}			.certificates p,.certificates input{				color:#303030;				font-size:13px;				line-height:28px;				border-radius:3px;				background:#e4e4e4;				padding:0 2%;				width:96%;				border:none;								}					.login-wrap{				position:absolute;				top:50%;				left:20px;				right:20px;				margin:-160px 0 0 0;				border-radius:6px;				background:#fff;				padding:30px;				box-shadow:0 0 3px #cacacd;						}			.login-wrap h2{				display:block;				text-align:center;				font-size:16px;				line-height:22px;				}				.login{				border-bottom:0;				}					.transparent{		      position: fixed;		      top:0;		      left:0;		      right:0;		      bottom:0;		      background:rgba(0,0,0,.5);		      }	  		  .tariff-tit{			  color:#303030;			  line-height:18px;			  }			  .parameter li p.tariff-txt{			  background:none;			  text-indent: 0;			  font-size:15px;			  margin-left:50px;			  line-height:20px;			  color:#a8aaae;			  }		  .parameter span.color{			  color:#ff374d;			  }  		  .ico-shop{			  float:left;			  width:35px;			  height:35px;			  background:url(@assets.CdnAssets.urlForAPIPublic("images/H5/3ico-1.png")) no-repeat center top;              background-size:35px 35px;			  position:relative; 			  }			  .ico-shop b{			  position:absolute;			  top:-10px;			  right:-4px;			  color:#ff314e;			  }	  		  .btn-shop p{		  			  margin-left:35px;			  text-align: right;			  }		  .btn-shop a.btn_finish{			  width:45%;			  margin-left:2%;			  }	  		  .btn-shop a.btn-w95{		     width:100%;		     position:relative;		     left:-17px;		     margin:0;		     }   			   /*需要整合的样式*/            .transparent {                position: fixed;                top: 0;                left: 0;                right: 0;                bottom: 0;                background: rgba(0,0,0,.5);            }  	ul.content { width:100%;}  .pic-banner img{     width:100%;     }    img.goods-car{   position: fixed;   bottom: 20px;   left:20px;    width: 45px;   height: 45px;   display: block;   z-index: 99;   text-align: center;    }   </style><script src="@assets.CdnAssets.urlForAPIPublic("javascripts/sheSaidJs/alert.js")"></script><script src="@assets.CdnAssets.urlForAPIPublic("javascripts/sheSaidJs/count.js")"></script><script type="text/javascript">  //添加统计var counturl = location.href.split('#')[0];jQuery(function($){	var url = 'http://chaxun.1616.net/s.php?type=ip&output=json&callback=?&_='+Math.random(); 	$.getJSON(url, function(data){		//添加统计		addcountwx(data.Ip,counturl,'H5_HOME','@usr.getUnionid()');	});});          function loadjscss(name,type){     if(type == "js"){      var fileref = document.createElement('script');      fileref.setAttribute("type","text/javascript");      fileref.setAttribute("src",name);     }else if(type == "css"){           var fileref = document.createElement('link');      fileref.setAttribute("rel","stylesheet");      fileref.setAttribute("type","text/css");      fileref.setAttribute("href",name);     }     if(typeof fileref != "undefined"){      document.getElementsByTagName("head")[0].appendChild(fileref);     }         }    /*     *X7--1280x720     *iphone6--1334x750     *小米Note--2560x1440     *iphone4_4s_5_5s--1136x640     *小米4_4c--1920x1080     */    var winW = $(window).width()*2;    if (winW >= 640 && winW < 720) {     loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/iphone4_4s_5_5s.css?1")","css");    } else if(winW >= 720 && winW < 750) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/x7.css")","css");    } else if(winW >= 750 && winW < 1080) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/iphone6.css")","css");    } else if(winW >= 1080 && winW < 1140) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/mi4_4c.css")","css");    } else if(winW >= 1140) {       loadjscss("@assets.CdnAssets.urlForAPIPublic("stylesheets/sheSaidCSS/miNote.css")","css");    }        </script>}{<div class="container"><!-- banner 使用 --><!-- <div class="hungrg"><img src="@assets.CdnAssets.urlForAPIPublic("images/H5/bbt/mhtbanner.jpg")" /></div>--?>            <div class="swiper-container" style="display:none">              <div class="swiper-wrapper">                    <div class="swiper-slide">Slide 1</div>                    <div class="swiper-slide">Slide 2</div>                    <div class="swiper-slide">Slide 3</div>                    <div class="swiper-slide">Slide 4</div>                </div>                <!-- Add Pagination -->                <div class="swiper-pagination"></div>            </div>                               <div class="list" id="divContainer">             @if(prolist!=null){                             <ul class="content">                                       @for(p <- prolist){                    <li onclick="goH5('@p.getPid()')">	                    <div class="pic-img">                    	                        <img src="@p.getListpic()"/>	                    </div>	                        <div class="name">	                            <div class="name-info">	                                <h2>@p.getTitle()</h2>	                                <!-- <p>@p.getSubtitle()</p> -->	                            </div>	                            <div class="price">	                                <span>￥<b>@if(p.getRmbprice().toDouble>p.getRmbprice().toInt){@p.getRmbprice()}else{@p.getRmbprice().toInt}</b><s>￥@if(p.getChinaprice().toDouble>p.getChinaprice().toInt){@p.getChinaprice()}else{@p.getChinaprice().toInt}</s></span>	                                <em><a href="javsscript:;">@p.getZhekou()折</a></em>	                            </div>	                        </div>	                                       <!--  <div class="china">                           <img src="@p.getNationalFlag()">                           <p>@p.getWayremark()</p>                        </div> -->                    </li>                   	}                                           </ul>                }            </div>		<div class="loading" id="Loadding" name="Loadding"><img src="@assets.CdnAssets.urlForAPIPublic("images/H5/bbt/loading.gif")" style="width:100%; height:auto;"></div>        </div>        <div class="pic-banner" onclick="javascript:window.location.href='@assets.CdnAssets.H5_SHOPPING_URL("")';">               <img src="@assets.CdnAssets.urlForAPIPublic("images/sheSaidImages/00001.jpg")" />            </div>            <img src="@assets.CdnAssets.urlForAPIPublic("images/H5/3ico-1.png")" class="goods-car"  onclick="gocart()"/>        <div><!-- 登录区 --><div class="transparent" id="showlogin" style="z-index:3000;display:none"><div class="container" id="showlogin" onclick=""><div class="login-wrap">	<h2>                  验证手机号<br>                  便于您按时收货    </h2>	<div class="login">		<form name="form1" id="form1" method="post" action="/api/checkUserVerify">		<input type="hidden" id="openid" name="openid" value="@usr.getOpenId()"/>		<input type="hidden" id="unionid" name="unionid" value="@usr.getUnionid()"/>		<input type="hidden" id="uid" name="uid" value="@usr.getUid()" />		<div class="input-wrap input-wrap-b">			<input type="text" id="phonereg" name="phonereg" class="input tel" placeholder="手机号">		</div>		<div class="input-wrap">			<input type="hidden" id="imgcheck" name="imgcheck" />			<input type="text" id="verify_sms" name="verify_sms" class="input letter" placeholder="短信验证码">			<a href="#" class="btn btn_code"><span id="sendsms" onclick="setDivCenter()">发送验证码</span></a>		</div>		</form>	</div>	<div class="protocol">		<p>			<i class="new_check"></i><a href="http://ht.neolix.cn/www/service/agreement.html">嗨个购用户协议</a>		</p>		<p>			<a href="#" class="btn btn_finish" onclick="checkuser()">完成</a>		</p>	</div>	<a href="javascript:;" class="pop-pay-close" onclick="closeshowlogin()"></a></div>	</div></div><!-- 登录区结束 -->           }{  <script type="text/javascript"> @if(login=="1"){	 @if(usr.getUid()==0){		document.getElementById("showlogin").style.display="";	 }else{		 window.location.href="/H5/orderprocart";		 	 }	}	 var ua = window.navigator.userAgent.toLowerCase(); var bw=false; var imgcheck=""; var flag=''; var reg = /^1\d{10}$/g;  var miao = 60; if(ua.match(/MicroMessenger/i) == 'micromessenger'){		bw=true;} /*关闭登录窗口层*/ function closeshowlogin(){ 	document.getElementById("showlogin").style.display="none"; } /*发送短信验证码*/ function verifySMS(){     	miao=60; 	var iswx="0"; 	if(bw==true) 		iswx="1"; 	 	var pho=document.getElementById("phonereg").value;   	var imc=document.getElementById("imgcheck").value; 	if ($("#phonereg").val().match(/^((1[0-9]{1})+\d{9})$/)) {     		time_op();     		 $.ajax({             type:"POST",             url:"/H5/userVerify",             data:{uid:"@usr.getUid()",phone:pho,reg:"0",imgcheck:imc,wx:iswx},             datatype: "json",//"xml", "html", "script", "json", "jsonp", "text".             beforeSend:function(){},             success:function(data){                                      		if(data.status=="1"){           			_alert("验证码已成功发送!");           		}else{           			_alert(data.msg);           		}             }   ,             complete: function(XMLHttpRequest, textStatus){             },             error: function(){                 _alert("发送失败!");             }                  	});         }      else{     	 _alert("请输入正确的手机号!"); 			//document.getElementById("phone").focus(); 			return false;      } } /*验证码发送倒计时*/ function time_op() {	 	miao--; 	if(miao>0){ 		document.getElementById("sendsms").innerHTML = miao+"秒"; 		document.getElementById("sendsms").onclick=""; 	} 	else 	{	 		//$("#sendsms").attr("onclick","verifySMS()"); 		document.getElementById("sendsms").onclick=function(){setDivCenter ();}; 		document.getElementById("sendsms").innerHTML = "重新发送"; 	} 	if(miao>0){ 		setTimeout("time_op()", "1000"); 	} } function setDivCenter(){  			if ($("#phonereg").val().match(/^((1[0-9]{1})+\d{9})$/)) {			verifySMS();		}		else{	   	 _alert("请输入正确的手机号!");				//document.getElementById("phone").focus();				return false;	    }	} /*检查注册填写项并注册*/ function checkuser(){ 	var pho=document.getElementById("phonereg").value;  	var ver=document.getElementById("verify_sms").value; 	var suc=true; 	 	if (!$("#phonereg").val().match(/^1\d{10}$/g)) { 		_alert("请输入正确的手机号"); 		suc=false; 	} 	else{     	if(ver.length<1){     		suc=false;     		_alert("请输入验证码")     	} 	}    	 	if(suc){ 	$.ajax({         type:"POST",         url:"/sheSaid/reguser",         data:{uid:'@usr.getUid()',verify_sms:ver,phone:pho,unionid:'@usr.getUnionid()',openid:'@usr.getOpenId()',mcode:'H5'},         datatype: "json",//"xml", "html", "script", "json", "jsonp", "text"         beforeSend:function(){},                 success:function(data){       		if(data.status=="1"){       			window.location.href="/H5/orderprocart";        		}else{       			_alert(data.msg);       		}         }   ,         complete: function(XMLHttpRequest, textStatus){         },         error: function(){             _alert("请输入正确的验证码!");         }              });   	      } }	function gocart(){		if(bw==true){			@if(usr.getOpenId!=""){				@if(usr.getUid()!=0){					window.location.href="/H5/orderprocart";				}else{					document.getElementById("showlogin").style.display="";				}			}else{				@if(usr.getUid()==0){					window.location.href="/H5/wxauthprocart?flg=porderlist";				}else{					window.location.href="/H5/orderprocart";				}			}		}else{			//_alert("请使用微信购买");			@if(usr.getUid()==0){				document.getElementById("showlogin").style.display="";			}else{				window.location.href="/H5/orderprocart";			}		}	}	 $("#Loadding").hide();	if(!NeuF)		var NeuF ={};     NeuF.ScrollPage=function(obj, options, callback) {		var _defaultOptions = { delay: 500, marginBottom: 100 };//默认配置：延迟时间delay和滚动条距离底部距离		marginBottomoptions =$.extend(_defaultOptions, options);		this.isScrolling =false;//是否在滚动		this.oriPos = 0;//原始位置		this.curPos = 0;//当前位置		var me =this;//顶层		$obj = (typeof obj == "string") ? $("#" +obj) : $(obj);//绑定滚动事件		$obj.scroll(function(ev) {                me.curPos=$obj.scrollTop();				if($(window).height() + $(window).scrollTop() >= $(document.body).height() -options.marginBottom) {					if(me.isScrolling ==true)return;                    me.isScrolling=true;                    setTimeout(function() { me.isScrolling =false; }, options.delay);//重复触发间隔毫秒					if(typeof callback == "function") callback.call(null, me.curPos -me.oriPos);                };                me.oriPos=me.curPos;            });        };	 $(function() {            window.scrollTo(0, 0);//每次F5刷新把滚动条置顶//marginBottom表示滚动条离底部的距离，0表示滚动到最底部才加载，可以根据需要修改			new NeuF.ScrollPage(window, { delay: 1000, marginBottom: 0 },function(offset) {if(offset > 0) {                    $("#Loadding").show();//加载提示                    //alert($(".content").size());                    var ppcount=$(".content").size();                    var pagecount='@count';                   // alert(ppcount+",,,,,"+pagecount);                    if(ppcount<pagecount){						setTimeout(function() {//这里就是异步获取内容的地方，这里简化成一句话，可以根据需要修改													$.ajax({		   			            type:"GET",		   			            url:"/H5/shoplistJson?page="+$(".content").size(),		   			            //返回数据的格式		   			            datatype: "json",//"xml", "html", "script", "json", "jsonp", "text".		   			            //在请求之前调用的函数		   			            beforeSend:function(){},		   			            //成功返回之后调用的函数            		   			            success:function(data){		   			            	//alert(data.htmlstr);		   			          		if(data.status==1){       						   			          						   			          		$("#divContainer").append($(data.htmlstr));//内容获取后，隐藏加载提示			   									   			          		}		   			          		$("#Loadding").hide();		   			            }   ,		   			            //调用执行后调用的函数		   			            complete: function(XMLHttpRequest, textStatus){		   			            },		   			            //调用出错执行的函数		   			            error: function(){		   			                //请求出错处理		   			                $("#Loadding").hide();		   			                _alert("提示请检查一下网络!");		   			            }        		   			         });							                    },1000);                    }else{                    	$("#Loadding").hide();                    }                }            });        });</script><script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script><script>var swiper = new Swiper('.swiper-container', {	loop : true,    pagination: '.swiper-pagination',    paginationClickable: true});var ua = window.navigator.userAgent.toLowerCase();var iswx="0";if(ua.match(/MicroMessenger/i) == 'micromessenger'){	iswx="1";	WeixinJSBridge.call('showOptionMenu');}  function goH5(pid){	window.location.href="/H5/product?pid="+pid;}  </script>@if(sign!=null){<script>var surl="@sign.getShareurl()";wx.config({    debug: false,    appId: '@sign.getAppId()',    timestamp: '@sign.getTimstr()',    nonceStr: '@sign.getNostr()',    signature: '@sign.getSign()',    jsApiList: ['checkJsApi',                'onMenuShareTimeline',                'onMenuShareAppMessage'    ]  });	wx.ready(function () {    // 1 判断当前版本是否支持指定 JS 接口，支持批量判断		wx.checkJsApi({		  jsApiList: [			'getNetworkType',			'previewImage'		  ],		  success: function (res) {			//alert(JSON.stringify(res));		  }		});		wx.onMenuShareTimeline({			title: '@sign.getSharetitle()', // 分享标题		    link: surl, // 分享链接		    imgUrl: '@sign.getShareimg()', // 分享图标		    success: function () { 		        // 用户确认分享后执行的回调函数		    },		    cancel: function () { 		        // 用户取消分享后执行的回调函数		    }		});		wx.onMenuShareAppMessage({			title: '@sign.getSharetitle()',			  desc: '@sign.getSharecontent()',			  link: surl,			  imgUrl: '@sign.getShareimg()',			  success: function (res) {				//alert('已分享');			  },			  cancel: function (res) {				//alert('已取消');			  }		  });		  });  wx.error(function (res){		//alert(res.errMsg);  });</script>}}