@(user:User)(pid:String)(daiyanid:String)(uid:String)(flg:String)(shareType:String)@views.html.sheSaid.main{<title>绑定手机</title><style>		    body{				background:#a7a8ae;				}		 	.login-wrap{				position:absolute;				top:50%;				left:20px;				right:20px;				margin:-160px 0 0 0;				border-radius:6px;				background:#fff;				padding:30px;				box-shadow:0 0 3px #cacacd;						}			.login-wrap h2{				display:block;				text-align:center;				font-size:16px;				line-height:22px;				}				.login{				border-bottom:0;				}			.input{				/*background:none;				padding-left:0;*/				}		  	   	  	    	  	  	  	        </style>}{<div class="container" id="showlogin"><div class="login-wrap">	<h2>                  验证手机号<br>                  便于您按时收货    </h2>	<div class="login">		<form name="form1" id="form1" method="post" action="/api/checkUserVerify">		<input type="hidden" id="openid" name="openid" value="@user.getOpenId()"/>		<input type="hidden" id="access_token" name="access_token" value="@user.getAccessToken()"/>		<input type="hidden" id="unionid" name="unionid" value="@user.getUnionid()"/>		<input type="hidden" id="nickname" name="nickname" value="@user.getNickname()"/>		<input type="hidden" id="headimg" name="headimg" value="@user.getHeadIcon()"/>		<input type="hidden" id="uid" name="uid" value="@uid" />		<input type="hidden" id="shareType" name="shareType" value="@shareType" />		<div class="input-wrap input-wrap-b">			<input type="text" id="phone" name="phone" class="input tel" placeholder="手机号">		</div>		<div class="input-wrap">			<input type="hidden" id="imgcheck" name="imgcheck" />			<input type="text" id="verify_sms" name="verify_sms" class="input letter" placeholder="短信验证码">			<a href="#" class="btn btn_code"><span id="sendsms" onclick="setDivCenter()">发送验证码</span></a>		</div>		</form>	</div>	<div class="protocol">		<p>			<i class="new_check"></i><a href="http://ht.neolix.cn/www/service/agreement.html">嗨个购用户协议</a>		</p>		<p>			<a href="#" class="btn btn_finish" onclick="checkuser()">完成</a>		</p>	</div></div>	</div><div class="pop-code" id="showdiv" style="display:none">           <section>               <p>                 <img src='@assets.CdnAssets.urlForAPIPublic("images/H5/ico.png")' class="pop-code-ico"><br>                 请先输入图形上的字符               </p>               <div>                  <input type="text" id="imgh" name="imgh" class="pop-code-input" placeholder="输入图形验证码" />                  <img id="imgtmp" border="0" alt="点击图片可刷新" class="fr" style="margin-top:3px;*margin-top:-20px;" onclick="this.src='@routes.Application.imageValidate?temp='+ (new Date().getTime().toString(36));" src="@routes.Application.imageValidate?temp=h68w3wf2" id="validateImage"  />               </div>               <p onclick="closeDiv()">                  <a href="javascript:;" class="btn btn_finish">完成</a>               </p>           </section>        </div>}{ <script type="text/javascript">
<!--var ua = window.navigator.userAgent.toLowerCase();var iswx="";if(ua.match(/MicroMessenger/i) == 'micromessenger'){	iswx="1";		document.getElementById("sendsms").onclick=function(){verifySMS();};}var checkisimg=false;var imgcheck="";function setDivCenter(){  	if ($("#phone").val().match(/^((1[0-9]{1})+\d{9})$/)) {		 $.ajax({	            type:"POST",	            url:"/H5/checkimgVerify",	            data:{phone:$("#phone").val()},	            datatype: "json",//"xml", "html", "script", "json", "jsonp", "text".	            //在请求之前调用的函数	            beforeSend:function(){},	            success:function(data){                           	          		if(data.status=="2"){	          			checkisimg=true;	          			verifySMS();	          		}else if(data.status=="1"){	          			showDiv();	          		}else{	          			_alert(data.msg);	          		}	            }   ,	            complete: function(XMLHttpRequest, textStatus){	            },	            error: function(){	                //请求出错处理	                _alert("发送失败!");	            }        	         	});   	}	else{   	 _alert("请输入正确的手机号!");			//document.getElementById("phone").focus();			return false;    }}function showDiv(){	document.getElementById("imgtmp").src=encodeURI("@routes.Application.imageValidate?temp="+(new Date().getTime().toString(36))+"\"");		var windowWidth = document.documentElement.clientWidth;   		 var windowHeight = document.documentElement.clientHeight;   		 var popupHeight = $("#showdiv").height();   		 var popupWidth = $("#showdiv").width();    	    var top = ($(window).height() - $("#showdiv").height())/2;   	    var left = ($(window).width() - $("#showdiv").width())/2;   	    var scrollTop = $(document).scrollTop();   	    var scrollLeft = $(document).scrollLeft();	    $("#showdiv").css({  	    	  "position": "absolute",   	    	  "top": (windowHeight-popupHeight)/2+$(document).scrollTop(),   	    	  "left": (windowWidth-popupWidth)/2   	    	 });   	   	    document.getElementById("showdiv").style.display="";}function closeDiv(){		imgcheck=document.getElementById("imgh").value;	document.getElementById("imgh").value="";		if(imgcheck.length<4){		_alert("请输入图形验证码")			}else{		//document.getElementById("sendsms").onclick=function(){verifySMS();};		document.getElementById("imgcheck").value=imgcheck;		document.getElementById("showdiv").style.display="none";		verifySMS();	}}		var flag='@flg';	 var reg = /^1\d{10}$/g; 
	var miao = 60;    function verifySMS(){        	//alert(iswx);    	if($("#imgcheck").val().length==4)			checkisimg=true;		if(iswx=="1")			checkisimg=true;    	miao=60;    	var pho=document.getElementById("phone").value;      	var imc=document.getElementById("imgcheck").value;    	if ($("#phone").val().match(/^((1[0-9]{1})+\d{9})$/)) {    		if(checkisimg==true){	    		time_op();	    		 $.ajax({	            //提交数据的类型 POST GET	            type:"POST",	            //提交的网址	            url:"/H5/userVerify",	            //提交的数据	            data:{uid:"@uid",phone:pho,reg:"0",imgcheck:imc,wx:iswx},	            //返回数据的格式	            datatype: "json",//"xml", "html", "script", "json", "jsonp", "text".	            //在请求之前调用的函数	            beforeSend:function(){},	            //成功返回之后调用的函数            	            success:function(data){                           	          		if(data.status=="1"){	          			_alert("验证码已成功发送!");	          		}else{	          			_alert(data.msg);	          		}	            }   ,	            //调用执行后调用的函数	            complete: function(XMLHttpRequest, textStatus){	              // alert(XMLHttpRequest.responseText);	              // alert(textStatus);	                //HideLoading();	            },	            //调用出错执行的函数	            error: function(){	                //请求出错处理	                _alert("发送失败!");	            }        	         	});       		}else{    			_alert("请输入图形验证码!");				return false;    		}         }         else{        	 _alert("请输入正确的手机号!");   			//document.getElementById("phone").focus();   			return false;         }    }    	function time_op() {			miao--;		if(miao>0){			document.getElementById("sendsms").innerHTML = miao+"秒";			document.getElementById("sendsms").onclick="";		}		else		{				//$("#sendsms").attr("onclick","verifySMS()");			document.getElementById("sendsms").onclick=function(){setDivCenter();};			document.getElementById("sendsms").innerHTML = "重新发送";		}		if(miao>0){			setTimeout("time_op()", "1000");		}	}			function checkuser(){    	var pho=document.getElementById("phone").value;  	    	//alert(pho);    	var ver=document.getElementById("verify_sms").value;    	var suc=true;    	if (!$("#phone").val().match(/^1\d{10}$/g)) {    		_alert("请输入正确的手机号");         	//document.getElementById("phone").focus();    		suc=false;    	}    	else{	    	if(ver.length<1){	    			    		suc=false;	    		_alert("请输入验证码")	    		//document.getElementById("verify_sms").focus();	    	}    	}    	if(suc){    $.ajax({            //提交数据的类型 POST GET            type:"POST",            //提交的网址            url:"/sheSaid/reguser",            //提交的数据            data:{uid:'@uid',verify_sms:ver,phone:pho,unionid:'@user.getUnionid()',nickname:'@user.getNickname()',headicon:'@user.getHeadIcon',openid:'@user.getOpenId()'},            //返回数据的格式            datatype: "json",//"xml", "html", "script", "json", "jsonp", "text"            //在请求之前调用的函数            beforeSend:function(){},            //成功返回之后调用的函数                        success:function(data){          		if(data.status=="1"){          			//alert("注册成功!");          			if(flag=='praise')          				window.location.href="/sheSaid/praise?uid="+data.uid+"&pid=@pid&daiyanid=@daiyanid&flg=praise&shareType=@shareType";          			else          				window.location.href="/sheSaid/order?uid="+data.uid+"&pid=@pid&daiyanid=@daiyanid&shareType=@shareType";          		}else{          			_alert("请输入正确的验证码!");          		}            }   ,            //调用执行后调用的函数            complete: function(XMLHttpRequest, textStatus){            },            //调用出错执行的函数            error: function(){                //请求出错处理                _alert("请输入正确的验证码!");            }                 });   	         }    }	
//-->
</script><script src="@assets.CdnAssets.urlForAPIPublic("javascripts/sheSaidJs/alert.js")"></script><script type="text/javascript" src="@assets.CdnAssets.urlForAPIPublic("javascripts/sheSaidJs/noShareWX.js")"></script>}